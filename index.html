<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>80s ARCADE RACER</title>
    <style>
        body { background: #000; color: #0ff; font-family: 'Courier New', Courier, monospace; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        #game-container { position: relative; border: 4px solid #f0f; box-shadow: 0 0 20px #f0f; }
        canvas { background: #111; display: block; }
        #overlay { position: absolute; top: 0; left: 0; width: 400px; height: 600px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.7); cursor: pointer; text-align: center; }
        .ui { position: absolute; top: -40px; width: 100%; display: flex; justify-content: space-between; font-size: 20px; }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="ui">
            <span>LIVES: <b id="lives">3</b></span>
            <span>SCORE: <b id="score">0</b></span>
        </div>
        <canvas id="road" width="400" height="600"></canvas>
        <div id="overlay">
            <h1>NEON STREAK</h1>
            <p>PRESS ANY KEY OR CLICK TO START</p>
        </div>
    </div>

<script>
const canvas = document.getElementById("road");
const ctx = canvas.getContext("2d");
const overlay = document.getElementById("overlay");

// Game State
let active = false;
let score = 0;
let lives = 3;
let speed = 5;
let playerLane = 1; 
const lanes = [100, 200, 300];

let enemy = { x: lanes[Math.floor(Math.random()*3)], y: -100 };
let lineOffset = 0;

// Audio
let audioCtx, engine;

function setupAudio() {
    if (audioCtx) return;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    engine = audioCtx.createOscillator();
    let gain = audioCtx.createGain();
    engine.type = 'sawtooth';
    engine.frequency.value = 50;
    gain.gain.value = 0.05;
    engine.connect(gain);
    gain.connect(audioCtx.destination);
    engine.start();
}

function beep() {
    if(!audioCtx) return;
    let osc = audioCtx.createOscillator();
    let g = audioCtx.createGain();
    osc.type = 'square';
    osc.frequency.setValueAtTime(600, audioCtx.currentTime);
    g.gain.setValueAtTime(0.1, audioCtx.currentTime);
    g.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.2);
    osc.connect(g); g.connect(audioCtx.destination);
    osc.start(); osc.stop(audioCtx.currentTime + 0.2);
}

// Drawing Car
function drawCar(x, y, color) {
    // Wheels
    ctx.fillStyle = "#fff";
    ctx.fillRect(x-22, y+10, 8, 15); // TL
    ctx.fillRect(x+14, y+10, 8, 15); // TR
    ctx.fillRect(x-22, y+45, 8, 15); // BL
    ctx.fillRect(x+14, y+45, 8, 15); // BR
    
    // Body
    ctx.fillStyle = color;
    ctx.fillRect(x-18, y, 36, 70);
    
    // Windshield
    ctx.fillStyle = "rgba(255,255,255,0.5)";
    ctx.fillRect(x-12, y+12, 24, 15);
}

function update() {
    if (!active) return;

    // Logic
    lineOffset += speed;
    enemy.y += speed;
    speed += 0.001;

    if (enemy.y > 600) {
        enemy.y = -100;
        enemy.x = lanes[Math.floor(Math.random()*3)];
        score++;
        document.getElementById("score").innerText = score;
        beep();
    }

    // Collision
    if (enemy.x === lanes[playerLane] && enemy.y > 430 && enemy.y < 570) {
        lives--;
        document.getElementById("lives").innerText = lives;
        enemy.y = -200;
        if (lives <= 0) {
            alert("GAME OVER! SCORE: " + score);
            location.reload();
        }
    }

    // Render
    ctx.fillStyle = "#111"; // Road
    ctx.fillRect(0, 0, 400, 600);
    
    // Shoulder lines
    ctx.fillStyle = "#f0f";
    ctx.fillRect(70, 0, 5, 600);
    ctx.fillRect(325, 0, 5, 600);

    // Dashed Lines
    ctx.strokeStyle = "#ff0";
    ctx.setLineDash([40, 40]);
    ctx.lineDashOffset = -lineOffset;
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(150, 0); ctx.lineTo(150, 600);
    ctx.moveTo(250, 0); ctx.lineTo(250, 600);
    ctx.stroke();

    drawCar(lanes[playerLane], 500, "#f06"); // Player
    drawCar(enemy.x, enemy.y, "#0ff"); // Enemy

    requestAnimationFrame(update);
}

// Interaction
const start = () => {
    if (active) return;
    active = true;
    overlay.style.display = "none";
    setupAudio();
    update();
};

window.addEventListener("keydown", (e) => {
    start();
    if (e.key === "ArrowLeft" && playerLane > 0) playerLane--;
    if (e.key === "ArrowRight" && playerLane < 2) playerLane++;
});
overlay.addEventListener("click", start);

</script>
</body>
</html>
